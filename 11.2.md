# linux 2021
-----------------------------
## 1. 大小和长度竟然不是一个意思

`sizeof()`和`strlen()`有什么异同之处？

他们对于不同参数的结果有什么不同？请试举例子说明。

```c
int main (void) {
    char s[] = "I love Linux\0\0\0";
    int a = sizeof(s);
    int b = strlen(s);
    printf("%d %d\n", a, b);
}
```
- sizeof是一个能计算输入字符串总长度的操作符（算\0）
- strlen是一个库函数，计算\0之前的字符串长度
  
  本题中输出结果为16、12,strlen遇到
\0就会停下，而sizeof会一直读到最后的\0。

## 2. 箱子的大小和装入物品的顺序有关

`test1`和`test2`都含有：1个`short`、1个`int`、1个`double`，那么`sizeof(t1)`和`sizeof(t2)`是否相等呢？这是为什么呢？

```c
struct test1 {
    int a;
    short b;
    double c;
};
struct test2 {
    short b;
    int a;
    double c;
};
int main(void) {
    struct test1 t1;
    struct test2 t2;
    printf("sizeof(t1): %d\n", sizeof(t1));
    printf("sizeof(t2): %d\n", sizeof(t2));
}
```
一般情况下，类型的顺序不同，其结构体大小也会有所差别，但这道题里的计算结果是相同的，都为16；`test1`int先申请4个字节，short再申请4个字节；剩下的2个字节放不下double类型，对齐数为8,此时刚好是8的倍数，所以再申请8个字节，4+4+8=16,16刚好是8的倍数，结果为16；`test2`short先申请4个字节，int又申请4个字节，最后double申请8个字节，结果为16。

## 3. 哦，又是函数
想必在高数老师的教导下大家十分熟悉函数这个概念。那么你了解计算机程序设计中的函数吗？请编写一个`func`函数，用来输出二维数组`arr`中每个元素的值。

```c
/*在这里补全func函数的定义*/
int main(void) {
    int arr[10][13];
    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < 13; j++) {
            arr[i][j] = rand();
        }
    }
    func(arr);
}
```
补全部分的代码：
```c
#include <stdio.h>
void func(int arr[10][13])
{
    for(int i=0;i<10;i++)
    {
        for(int j=0;j<13;j++)
        {
            printf("%d ",arr[i][j]);
        }
        printf("\n");
    }
}
```
## 4.就不能换个变量名吗？

- 请结合下面的程序，简要谈谈`传值`和`传址`的区别。
- 简要谈谈你对C语言中变量的生命周期的认识。

```c
int ver = 123;
void func1(int ver) {
    ver++;
    printf("ver = %d\n", ver);
}
void func2(int *pr) {
    *pr = 1234;
    printf("*pr = %d\n", *pr);
    pr = 5678;
    printf("ver = %d\n", ver);
}
int main() {
    int a = 0;
    int ver = 1025;
    for (int a = 3; a < 4; a++) {
        static int a = 5;
        printf("a = %d\n", a);
        a = ver;
        func1(ver);
        int ver = 7;
        printf("ver = %d\n", ver);
        func2(&ver);
    }
    printf("a = %d\tver = %d\n", a, ver);
}
```
输出结果为：<br>
a=5<br>
ver=1026<br>
ver=7<br>
*pr=1234<br>
ver=123<br>
a=0 ver=1025<br>
  
  - `传值`当一个变量被传给另一个变量时，是将该变量的值复制到新变量中，在函数内部对参数进行修改不会影响到原始变量
  - `传址`当一个变量的地址被传递给另一个变量时，是将改变量的内存地址复制到新变量中，在函数内部对参数所指向的内存进行修改会影响到原始变量
  - `全局变量`：在程序运行期间一直存在，进程开始时创建，进程结束时销毁
  - `局部变量`：进入函数时创建，退出函数时销毁
  - `static修饰的全局变量`：生命周期和全局变量相同，但作用域被限制在定义文件内
  - `static修饰的局部变量`：生命周期和全局变量相同，但作用域被限制在函数内

## 5. 套娃真好玩！

请说明下面的程序是如何完成求和的？

```c
unsigned sum(unsigned n) { return n ? sum(n - 1) + n : 0; }
int main(void) { printf("%u\n", sum(100)); }
```
利用了函数递归，第一次执行后的结果为：sum(99)+100,第二次执行后结果为；sum(98)+99+100......一直执行到最后一次：sum(0)+1+2+......+100=0+1+2+......+100=5050。

## 6. 算不对的算术

```c
void func(void) {
    short a = -2;
    unsigned int b = 1;
    b += a;
    int c = -1;
    unsigned short d = c * 256;
    c <<= 4;
    int e = 2;
    e = ~e | 6;
    d = (d & 0xff) + 0x2022;
    printf("a=0x%hx\tb=0x%x\td=0x%hx\te=0x%x\n", a, b, d, e);
    printf("c=Ox%hhx\t\n", (signed char)c);
}
```
输出结果：<br>
a=0xfffe b=0xffffffff d=0x2022 e=0xffffffff<br>
c=0xf0<br>
应先根据类型写出对应的二进制编码，将原码转化为反码再转化为补码，最后转化成16进制数字并打印。



